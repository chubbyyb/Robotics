#pragma config(Sensor, S1,     colorSensor,    sensorEV3_Color)
#pragma config(Sensor, S2,     gyroSensor,     sensorEV3_Gyro, modeEV3Gyro_RateAndAngle)
#pragma config(Sensor, S4,     sonarSensor,    sensorEV3_Ultrasonic)
#pragma config(Motor,  motorA,          armMotor,      tmotorEV3_Large, PIDControl, encoder)
#pragma config(Motor,  motorB,          leftMotor,     tmotorEV3_Large, PIDControl, driveLeft, encoder)
#pragma config(Motor,  motorC,          rightMotor,    tmotorEV3_Large, PIDControl, driveRight, encoder)
//*!!Code automatically generated by 'ROBOTC' configuration wizard               !!*//

/*------------------------------------------------------------------------------------------------
  This program will move your robot make a series of moves for different lengths of time.
  At the end of the program, all motors will shut down automatically and turn off.

                            ROBOT CONFIGURATION: LEGO EV3 REM Bot
    MOTORS & SENSORS:
    [I/O Port]          [Name]              [Type]                [Description]
    MotorC              leftMotor           LEGO EV3 Motor    Left side motor
    MotorB        rightMotor          LEGO EV3 Motor    Right side motor (reversed)
------------------------------------------------------------------------------------------------*/
float generateThreshold()
{
      int n = 0;
      float threshold = 0;
      int countLight = 0;

      while(n < 2)
      {

            if(getButtonPress(buttonEnter) == 1)
            {
                  sleep(1000);
                  displayCenteredBigTextLine(n*2,"Light = %d", SensorValue(S1));
                  countLight = countLight+SensorValue(S1);
                  n=n+1;
            }

      }

      threshold = countLight/n;
      displayCenteredTextLine(5, "Average = %f",threshold);
      sleep(2000);
      return threshold;

}


task main()
{

      float threshold = generateThreshold();
      while(true)
      {
                  displayCenteredTextLine(10, "%f",threshold);
      }

      //while(true)
      //{
      //    if(getButtonPress(buttonEnter) == 1)
      //    {
      //    int light = SensorValue(S1);
      //    displayCenteredBigTextLine(4,"Light = %d", light);
      //    }
      //}

}